(function(e){function t(t){for(var r,i,l=t[0],c=t[1],u=t[2],d=0,f=[];d<l.length;d++)i=l[d],s[i]&&f.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);a&&a(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==s[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var a=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0939":function(e,t,n){},"09ab":function(e,t,n){},"0d1d":function(e,t,n){"use strict";var r=n("22bc"),s=n.n(r);s.a},1:function(e,t){},"1fde":function(e,t,n){var r={"./uws_darwin_57.node":"d13f","./uws_darwin_59.node":"b384","./uws_darwin_64.node":"91f6","./uws_linux_57.node":"c3ef","./uws_linux_59.node":"bc7c","./uws_linux_64.node":"3980","./uws_win32_57.node":"02bf","./uws_win32_59.node":"7dfe","./uws_win32_64.node":"0870"};function s(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="1fde"},2:function(e,t){},"22bc":function(e,t,n){},3:function(e,t){},4:function(e,t){},"49c7":function(e,t,n){},"4a68":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="4a68"},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav-bar"),n("router-view")],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-board"},[n("header",{staticClass:"flex justify-center align-center p-10"},[n("h2",{staticClass:"mx-20",style:{color:e.currTurn}},[e._v("Current Turn")]),n("soldier",{attrs:{color:e.currTurn}})],1),n("div",{staticClass:"flex flex-row"},[e.cells?n("game-board",{attrs:{cells:e.cells}}):e._e(),n("dices-section")],1),n("footer")])},l=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"game-board",class:{"flipped-board":"black"===e.userColor},on:{click:e.unselect}},[n("div",{staticClass:"flex flex-column"},[n("div",{staticClass:"board-row top-row flex space-between"},[n("game-cell",{attrs:{exit:!0,cell:e.cells[0]}}),n("div",{staticClass:"board-cells flex space-between"},[e._l(6,function(t){return e.cells?n("game-cell",{key:t,attrs:{cell:e.cells[t]}}):e._e()}),n("game-cell",{attrs:{middle:!0,cell:e.cells[26]}}),e._l(6,function(t){return e.cells?n("game-cell",{key:t+6,attrs:{cell:e.cells[t+6]}}):e._e()})],2)],1),e.winner?n("span",{staticClass:"win capitalize"},[e._v(e._s(e.winner)+" has won!")]):e._e(),n("div",{staticClass:"board-row bot-row flex space-between"},[n("div",{staticClass:"board-cells flex space-between"},[e._l(6,function(t){return e.cells?n("game-cell",{key:t+12,attrs:{cell:e.cells[t+12]}}):e._e()}),n("game-cell",{attrs:{middle:!0,cell:e.cells[27]}}),e._l(6,function(t){return e.cells?n("game-cell",{key:t+18,attrs:{cell:e.cells[t+18]}}):e._e()})],2),n("game-cell",{attrs:{exit:!0,cell:e.cells[25]}})],1)])])},u=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-cell flex flex-column align-center wrap",class:{middle:e.middle,exit:e.exit,possibleMove:e.cell.isPossibleMove},on:{click:function(t){return t.stopPropagation(),e.onCellClick(t)}}},[e.middle?e._e():n("div",{class:{"triangle-up":e.cell.id>12&&e.cell.id<25,triangle:e.cell.id>0&&e.cell.id<25,"triangle-down":e.cell.id<13&&e.cell.id>0,"triangle-red":e.cell.id%2===0,"triangle-black":e.cell.id%2!==0,"exit-cell":0===e.cell.id||25===e.cell.id,"triangle-green":e.cell.isPossibleMove}}),e._l(e.cell.soldiers,function(t,r){return e.cell.soldiers?n("soldier",{key:t.id,attrs:{soldier:t,idx:r},nativeOn:{dblclick:function(t){e.onSoldierDblClick()},mouseout:function(t){e.onSoldierOut()},mouseover:function(n){e.onSoldierHover(t)},click:function(n){n.stopPropagation(),e.onSoldierClick(t)}}}):e._e()})],2)},d=[],f=(n("96cf"),n("1da1")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"soldier-section"},[e.soldier?n("div",{staticClass:"soldier",class:{white:"white"===e.soldier.color,black:"black"===e.soldier.color,selected:e.soldier.selected,"animated tada fast":e.soldier.justMoved}}):e._e(),e.color?n("div",{staticClass:"soldier-const",class:{white:"white"===e.color,black:"black"===e.color}}):e._e()])},m=[],p={props:{soldier:Object,color:String}},g=p,v=(n("0d1d"),n("2877")),w=Object(v["a"])(g,h,m,!1,null,"51cf8f9f",null);w.options.__file="soldier.vue";var b=w.exports,C=(n("8055"),{props:{cell:Object,middle:Boolean,exit:Boolean},components:{soldier:b},methods:{onCellClick:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.selectedSoldier){e.next=6;break}return this.$store.commit("showNoPossibleMoves"),e.next=4,this.$store.dispatch({type:"moveSoldier",targetCell:this.cell});case 4:t=e.sent,t&&(n=1,r=this.$store.getters.cells,this.$socket.emit("soldierMoved",r,n));case 6:this.$store.commit("unselectSoldiers");case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onSoldierClick:function(e){e.selected?this.$store.commit("unselectSoldiers"):e.isOut?this.onCellClick():(this.$store.commit("unselectSoldiers"),this.$store.commit("showNoPossibleMoves"),this.$store.commit({type:"showPossibleMoves",possibleMoves:e.possibleMoves,soldier:e}),this.$store.commit({type:"selectSoldier",soldierId:e.id}))},onSoldierDblClick:function(){},onSoldierHover:function(e){e.possibleMoves.length&&this.$store.commit({type:"showPossibleMoves",possibleMoves:e.possibleMoves,soldier:e})},onSoldierOut:function(){this.selectedSoldier||this.$store.commit("showNoPossibleMoves")}},computed:{selectedSoldier:function(){return this.$store.getters.selectedSoldier}}}),_=C,k=(n("a7e0"),Object(v["a"])(_,a,d,!1,null,"7740a308",null));k.options.__file="game-cell.vue";var y=k.exports,D={props:{cells:Array},components:{gameCell:y},methods:{unselect:function(){this.$store.commit("showNoPossibleMoves"),this.$store.commit("unselectSoldiers")}},computed:{winner:function(){return this.$store.getters.winner},userColor:function(){return this.$store.getters.loggedInUserColor}}},S=D,$=(n("efd8"),Object(v["a"])(S,c,u,!1,null,"1fc7afc9",null));$.options.__file="game-board.vue";var x=$.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dices-section flex flex-column align-center"},[e.showDiceBtn?n("button",{staticClass:"animate bounce infinite bold capitalize",on:{click:function(t){return t.stopPropagation(),e.decideWhoStarts(t)}}},[e._v("click to decide who starts")]):e._e(),e.showDicesBtn?n("button",{staticClass:"bold capitalize",on:{click:function(t){return t.stopPropagation(),e.throwDices(t)}}},[e._v("click to throw dices")]):e._e(),e.isGameOn?n("dice",{attrs:{rolling:e.rolling,num:e.dices.num1ToShow}}):e._e(),e.isGameOn?n("dice",{attrs:{rolling:e.rolling,num:e.dices.num2ToShow}}):n("dice",{attrs:{rolling:e.rolling,num:e.startDice.dice}}),n("div",{staticClass:"soldier-section capitalize text-center"},[e._v("current turn:")]),n("soldier",{attrs:{color:e.currTurn}})],1)},O=[],U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dice flex flex-row justify-evenly",class:{rolling:e.rolling}},[n("div",{staticClass:"flex flex-column justify-evenly"},e._l(3,function(t){return n("div",{key:t,staticClass:"dot",class:{show:e.displayDots.includes(2*t-1)}})})),n("div",{staticClass:"flex flex-column justify-evenly"},[n("div",{staticClass:"dot",class:{show:e.displayDots.includes(7)}})]),n("div",{staticClass:"flex flex-column justify-evenly"},e._l(3,function(t){return n("div",{key:t,staticClass:"dot",class:{show:e.displayDots.includes(0+2*t)}})}))])},T=[],M=(n("c5f6"),{props:{num:Number,rolling:Boolean},computed:{displayDots:function(){switch(this.num){case 1:return[7];case 2:return[1,6];case 3:return[1,6,7];case 4:return[1,5,2,6];case 5:return[1,5,2,6,7];case 6:return[1,2,3,4,5,6]}}}}),E=M,P=(n("e887"),Object(v["a"])(E,U,T,!1,null,"76f53de6",null));P.options.__file="dice.vue";var j=P.exports,L={components:{dice:j,soldier:b},data:function(){return{}},methods:{throwDices:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$store.commit("rollDices"),t=1,this.$socket.emit("rollDices",t),this.$store.dispatch("throwDices"),this.$socket.emit("dicesRes",t,this.dices);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),decideWhoStarts:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("rollDices"),t=1,this.$socket.emit("rollDices",t),n=this.userColor,n="white"===n?"black":"white",e.next=7,this.$store.dispatch({type:"diceRes",userColor:n});case 7:setTimeout(function(){r.$store.commit("unrollDices")},1e3),this.$socket.emit("startDiceRes",t,this.startDice.dice);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},sockets:{dicesRolling:function(){this.$store.commit("rollDices")},dicesUnrolling:function(e){this.$store.commit("unrollDices"),this.$store.commit({type:"dicesRes",dices:e})},diceUnrolling:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,setTimeout(function(){r.$store.commit("unrollDices")},1e3);case 2:return n=this.userColor,e.next=5,this.$store.dispatch({type:"diceRes",dice:t,userColor:n});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),turnEnded:function(){this.$store.commit("endTurn")}},computed:{dices:function(){return this.$store.getters.dices},duringTurn:function(){return this.$store.getters.duringTurn},currTurn:function(){return this.$store.getters.currTurn},userColor:function(){return this.$store.getters.loggedInUserColor},showDicesBtn:function(){return this.isGameOn&&!this.duringTurn&&!this.rolling&&this.currTurn===this.userColor},rolling:function(){return this.$store.getters.dicesRolling},isGameOn:function(){return this.$store.getters.isGameOn},startDice:function(){return this.$store.getters.startDice},showDiceBtn:function(){return!this.isGameOn&&(!this.startDice.white&&"white"===this.userColor||this.startDice.white&&!this.startDice.black&&"black"===this.userColor)}},watch:{duringTurn:function(e,t){if(!1===e){var n=1;this.$socket.emit("endTurn",n)}},"startDice.white":function(e,t){var n=this;if(this.startDice.black&&this.startDice.white){if(this.startDice.white===this.startDice.black)return this.$store.commit("nullDice"),!1;var r=this.startDice.white>this.startDice.black?"white":"black";this.$store.commit({type:"setCurrTurn",startingColor:r}),setTimeout(function(){n.$store.commit("gameOn")},2e3)}},"startDice.black":function(e,t){var n=this;if(this.startDice.black&&this.startDice.white){if(this.startDice.white===this.startDice.black)return this.$store.commit("nullDice"),!1;var r=this.startDice.white>this.startDice.black?"white":"black";this.$store.commit({type:"setCurrTurn",startingColor:r}),setTimeout(function(){n.$store.commit("gameOn")},2e3)}}}},N=L,R=(n("880f"),Object(v["a"])(N,I,O,!1,null,"426e5fc9",null));R.options.__file="dices-section.vue";var B=R.exports,G={name:"appBoard",components:{gameBoard:x,dicesSection:B,soldier:b},methods:{},computed:{cells:function(){return this.$store.getters.cells},currTurn:function(){return this.$store.getters.currTurn},winner:function(){return this.$store.getters.winner}},created:function(){this.$store.dispatch({type:"setBoard"});var e=1;this.$socket.emit("gameJoined",e)},sockets:{userJoined:function(){var e=1;this.$socket.emit("alreadyHere",e)},someoneAlreadyHere:function(){this.$store.commit("changeMyColor")},movedSoldier:function(e){this.$store.dispatch({type:"setBoard",cells:e})},gameEnded:function(e){this.$store.commit({type:"endGame",winner:e})}},watch:{winner:function(e,t){if(e){var n=1,r=e;this.$socket.emit("endGame",n,r)}}}},A=G,W=(n("7a55"),Object(v["a"])(A,i,l,!1,null,"40d03fde",null));W.options.__file="app-board.vue";var H=W.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLoggedInUser?e._e():n("div",{staticClass:"nav-bar flex space-between"},[n("router-link",{staticClass:"logo",attrs:{to:"/"}},[e._v("backGammon")]),n("div",{staticClass:"links"},[e.isLoggedInUser?n("el-button",{attrs:{round:"",to:"/event/edit"},on:{click:e.goEdit}},[e._v("\n        Create "),n("i",{staticClass:"fas fa-plus"})]):e._e(),e.loggedInUser?n("img",{staticClass:"circle-icon-sm",attrs:{src:e.loggedInUser.pic},on:{click:e.goProfile}}):e._e(),e.isLoggedInUser?n("a",{attrs:{href:"#"}},[e._v("\n        "+e._s(e.userColor)+"\n      ")]):e._e(),e.isLoggedInUser?n("a",{on:{click:e.logout}},[e._v("Logout")]):n("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),n("a",{staticClass:"icon",class:{open:e.isOpen,guest:!e.isLoggedInUser},on:{click:e.setIsOpen}},[n("i",{staticClass:"fa fa-bars"})]),n("aside",{staticClass:"flex flex-column",class:{open:e.isOpen,guest:!e.isLoggedInUser}},[e.isLoggedInUser?n("a",{on:{click:e.logout}},[e._v("Logout")]):e._e(),e.isLoggedInUser?n("div",{staticClass:"flex align-center profile-wrapper"},[n("img",{staticClass:"circle-icon-sm",attrs:{src:e.loggedInUser.pic},on:{click:e.goProfile}}),n("a",{on:{click:e.goProfile}},[e._v("\n          Profile\n        ")])]):n("a",{on:{click:e.goLogin}},[e._v("Login")]),e.isLoggedInUser?n("el-button",{attrs:{round:"",to:"/event/edit"},on:{click:e.goEdit}},[e._v("\n        Create "),n("i",{staticClass:"fas fa-plus"})]):e._e()],1)],1)},q=[],z={data:function(){return{isOpen:!1}},methods:{goProfile:function(){this.isOpen=!1,this.$router.push("/user/".concat(this.loggedInUser._id))},setIsOpen:function(){return this.isOpen=!this.isOpen},logout:function(){var e=this;this.isOpen=!1,this.$store.dispatch({type:"logout"}).then(function(){e.$router.push("/")})},goEdit:function(){this.isOpen=!1,this.$router.push("/event/edit")},goLogin:function(){this.isOpen=!1,this.$router.push("/login")}},computed:{isLoggedInUser:function(){return this.$store.getters.isLoggedInUser},loggedInUser:function(){return this.$store.getters.loggedInUser},userColor:function(){return this.$store.getters.loggedInUserColor}}},F=z,K=(n("c597"),Object(v["a"])(F,J,q,!1,null,null,null));K.options.__file="nav-bar.vue";var V=K.exports,Q={components:{navBar:V},created:function(){this.$store.dispatch("getLoggedInUser")}},X=Q,Y=Object(v["a"])(X,s,o,!1,null,null,null);Y.options.__file="App.vue";var Z=Y.exports,ee=n("8c4f"),te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"signup-card-wrapper"},[n("form",{staticClass:"signup-form-container flex flex-column align-center",on:{submit:function(t){return t.preventDefault(),e.submitNewUser(t)}}},[n("h1",[e._v("sign up")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{required:"",type:"text",placeholder:"Full Name..."},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",type:"password",placeholder:"Password..."},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),n("div",{staticClass:"signup-button-wrapper"},[n("button",{staticClass:"brand-button",attrs:{type:"submit"}},[e._v("Save")]),n("router-link",{attrs:{to:"/"}},[n("button",{staticClass:"brand-button"},[e._v("Back")])])],1)])])},ne=[],re={data:function(){return{newUser:{name:"",password:""}}},methods:{submitNewUser:function(){var e=this;this.$store.dispatch({type:"signUpUser",newUser:this.newUser}).then(function(){e.fromEventId?e.$router.push("/event/".concat(e.fromEventId)):e.$router.push("/")})}},created:function(){document.body.scrollIntoView({block:"start"}),this.fromEventId=this.$route.params.eventId}},se=re,oe=(n("7dd9"),Object(v["a"])(se,te,ne,!1,null,"26695c42",null));oe.options.__file="sign-up.vue";var ie=oe.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"login-page flex justify-center"},[n("form",{staticClass:"flex flex-column align-center",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("h2",[e._v("Login to play")]),n("el-input",{attrs:{required:"",placeholder:"username"},model:{value:e.loginData.userName,callback:function(t){e.$set(e.loginData,"userName",t)},expression:"loginData.userName"}}),n("el-input",{attrs:{required:"",type:"password",placeholder:"password"},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password",t)},expression:"loginData.password"}}),e.isWrong?n("span",[e._v("Wrong password / username")]):e._e(),n("div",{staticClass:"flex"},[n("el-button",{staticClass:"brand-button",attrs:{round:"","native-type":"submit"}},[n("i",{staticClass:"fas fa-sign-in-alt"}),e._v(" Login")]),n("el-button",{staticClass:"brand-button",attrs:{round:""},on:{click:e.signup}},[n("i",{staticClass:"fas fa-user-plus"}),e._v(" Sign Up")])],1),n("a",[e._v("forgot your password?")])],1)])},ce=[],ue={data:function(){return{loginData:{userName:"",password:""},isWrong:!1,fromEventId:""}},methods:{onSubmit:function(){var e=this;this.$store.dispatch({type:"login",loginData:this.loginData}).then(function(t){t?(e.isWrong=!1,e.fromEventId?e.$router.push("/event/".concat(e.fromEventId)):e.$router.push("/")):e.isWrong=!0})},signup:function(){this.fromEventId?this.$router.push("/signup/".concat(this.fromEventId)):this.$router.push("/signup")}},created:function(){document.body.scrollIntoView({block:"start"}),this.fromEventId=this.$route.params.eventId}},ae=ue,de=(n("8ff2"),Object(v["a"])(ae,le,ce,!1,null,null,null));de.options.__file="login-page.vue";var fe=de.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-board")},me=[],pe={components:{appBoard:H}},ge=pe,ve=(n("cae5"),Object(v["a"])(ge,he,me,!1,null,null,null));ve.options.__file="home-page.vue";var we=ve.exports;r["default"].use(ee["a"]);var be=new ee["a"]({mode:"history",base:"/",routes:[{path:"/",name:"homepage",component:we},{path:"/signup",name:"signup",component:ie},{path:"/login",name:"login",component:fe}]}),Ce=n("2f62"),_e=(n("6762"),n("2fdb"),n("2909")),ke=(n("ac6a"),n("7f7f"),n("20d6"),n("7514"),{getRandomInt:ye,makeId:De,makeLorem:$e,getCurrency:Se});function ye(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function De(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function Se(e){switch(e){case"ILS":return"₪";case"EUR":return"€";case"USD":return"$";default:return""}}function $e(e){var t="";while(t.length<e){var n=ye(3,6),r=xe(n);Math.random()>.9&&(r+=","),t+=r+" "}return t=t.substring(0,e),t=t[0].toUpperCase()+t.substr(1),t}function xe(e){var t="";while(t.length<e){var n=Ie();t+=n}return t}function Ie(){var e="abcdefghijklmnopqrstuvwxyz",t=parseInt(Math.random()*e.length);return e.charAt(t)}var Oe={createSoldiers:Te,getAllSoldiers:Ee,getSoldierById:Pe,getCellBySoldierId:Le,updateCells:Re,updateCell:Be,isPossibleMove:Ge,passTurn:Ae,checkIsEating:We,hasEatenSoldiers:He,isMiddleCell:Je,calcPossibleMoves:Ke,throwDices:qe,updateDices:ze,getMiddleCell:Ne,isEndGame:st,nullDices:Fe,clearCells:ot},Ue=0;function Te(e,t){for(var n=[],r=0;r<e;r++)n.push(Me(t));return n}function Me(e){var t={color:e,id:Ue++,possibleMoves:[],isEaten:!1,isOut:!1,selected:!1,isLastInCell:!1,justMoved:!1};return t}function Ee(e){var t=[];return e.map(function(e){return e.soldiers}).forEach(function(e){e.forEach(function(e){t.push(e)})}),t}function Pe(e,t){var n;return e.find(function(e){if(n=e.soldiers.find(function(e){return e.id===t}),n)return n}),n}function je(e,t){return e.find(function(e){return e.id===t})}function Le(e,t){return e.find(function(e){return e.soldiers.find(function(e){return e.id===t})})}function Ne(e,t){var n="white"===e?26:27;return je(t,n)}function Re(e){e.forEach(function(e){Be(e)})}function Be(e){var t=0,n=0;e.soldiers.forEach(function(r,s){r.possibleMoves=[],r.isLastInCell=s===e.soldiers.length-1,"white"===r.color?t++:"black"===r.color&&n++}),e.isHouseOf=t>1?"white":n>1&&"black",25!==e.id&&20!==e.id||e.soldiers.forEach(function(e){e.isOut=!0}),26!==e.id&&27!==e.id||e.soldiers.forEach(function(e){e.isEaten=!0})}function Ge(e,t){return void 0!==t.possibleMoves.find(function(t){return t===e})}function Ae(e){return"white"===e?"black":"white"}function We(e,t){return!(!e.soldiers.length||e.soldiers[0].color===t)}function He(e,t){return t=t.filter(function(t){return t.color===e}),!!t.find(function(e){return e.isEaten})}function Je(e){return 26===e.id||27===e.id}function qe(e){if(e.num1=ke.getRandomInt(1,7),e.num2=ke.getRandomInt(1,7),e.num1>e.num2){var t=e.num1;e.num1=e.num2,e.num2=t}return e.num1ToShow=e.num1,e.num2ToShow=e.num2,e.num1===e.num2?(e.doubleCount=4,e.num2=null):e.doubleCount=0,e}function ze(e,t,n){var r=t.id;26===r?r=0:27===r&&(r=25);var s=Math.abs(r-n.id);if(e.doubleCount){var o=Math.floor(s/e.num1);s%e.num1!==0&&o++,e.doubleCount-=o,e.doubleCount||(e.num1=null)}else s<=e.num1?e.num1=null:s<=e.num2?e.num2=null:(e.num1=null,e.num2=null);return e}function Fe(e){return e.num1=null,e.num2=null,e.doubleCount=null,e}function Ke(e,t,n,r){r=Ve(n,r,t);var s="white"===t?1:-1,o=[];return r.forEach(function(r){var i=Le(n,r.id),l=Qe(e,i,s);l=Xe(i,l),l=Ye(n,l,t),l=Ze(e,l),l=et(l),rt(n,t)||(l=tt(l,t)),r.possibleMoves=l,o.push({soldierId:r.id,moves:l})}),nt(o)||(o=[]),o}function Ve(e,t,n){return He(n,t)?"white"===n?[je(e,26).soldiers[je(e,26).soldiers.length-1]]:[je(e,27).soldiers[je(e,27).soldiers.length-1]]:t.filter(function(e){return e.color===n&&e.isLastInCell})}function Qe(e,t,n){var r=[],s=t.id,o=!0;if(26===s?s=0:27===s?s=25:o=!1,e.doubleCount)for(var i=1;i<=e.doubleCount;i++)r.push(s+n*e.num1*i);else r=e.num1||e.num2?o?[s+n*e.num1,s+n*e.num2,null]:[s+n*e.num1,s+n*e.num2,s+n*(e.num1+e.num2)]:[];return r}function Xe(e,t){var n=e.id;return 27===e.id?n=25:26===e.id&&(n=0),t.map(function(e){return e===n?null:e})}function Ye(e,t,n){return e=t.map(function(t){return je(e,t)}),e.forEach(function(e,r){(e&&"white"===n&&"black"===e.isHouseOf||e&&"black"===n&&"white"===e.isHouseOf)&&(t[r]=null)}),t}function Ze(e,t){if(e.doubleCount){var n=t.findIndex(function(e){return null===e});return-1!==n&&(t=t.map(function(e,t){return t>n?null:e})),t}return null===t[0]&&null===t[1]&&(t[2]=null),t}function et(e){e=e.map(function(e){return e>25?25:e<0?0:e});var t=e.findIndex(function(e){return 25===e||0===e});return-1!==t&&(e=e.map(function(e,n){return n>t?null:e})),e}function tt(e,t){return"white"===t?e.map(function(e){return e>=25||0===e?null:e}):e.map(function(e){return 0===e||e>=25?null:e})}function nt(e){return e.find(function(e){return!!e.moves.length&&void 0!==e.moves.find(function(e){return null!==e})})}function rt(e,t){e="white"===t?e.slice(19,26):e.slice(0,7);var n=0;return e.forEach(function(e){e.soldiers.forEach(function(e){e.color===t&&n++})}),15===n}function st(e,t){var n="white"===t?e[25].soldiers.length:e[0].soldiers.length;return 15===n}function ot(e){return e.forEach(function(e){e.soldiers=[]}),e}var it=n("bc3a"),lt="",ct={login:ut,logout:at,getLoggedInUser:dt,getById:ft,signupUser:ht};function ut(e){var t=e.userName,n=e.password;return it.put("".concat(lt,"/login"),{userName:t,password:n}).then(function(e){return sessionStorage.loggedInUser=JSON.stringify(e.data),e.data})}function at(){return it.post("".concat(lt,"/logout")).then(function(){sessionStorage.removeItem("loggedInUser")})}function dt(){return sessionStorage.loggedInUser?Promise.resolve(JSON.parse(sessionStorage.loggedInUser)):Promise.resolve("")}function ft(e){if(e)return it.get("".concat(lt,"/player/").concat(e)),it.get("".concat(lt,"/player/").concat(e)).then(function(e){return e.data})}function ht(e){return it.post("".concat(lt,"/signup"),e)}var mt={state:{cells:[],soldiers:[],selectedSoldier:null,currTurn:null,dices:{num1:6,num2:6,num1ToShow:6,num2ToShow:6,doubleCount:0,rolling:!1},possibleMoves:[],winner:!1,duringTurn:!1,loggedInUser:{}},mutations:{setLoggedInUser:function(e,t){var n=t.user;e.loggedInUser={name:n.name,_id:n._id,pic:n.pic,color:"white"}},logOutUser:function(e){e.loggedInUser=""},changeMyColor:function(e){e.loggedInUser.color="black"},unselectSoldiers:function(e){var t=Oe.getAllSoldiers(e.cells);t.forEach(function(e){return e.selected=!1}),e.selectedSoldier=null},selectSoldier:function(e,t){var n=t.soldierId,r=Oe.getSoldierById(e.cells,n),s=Oe.getAllSoldiers(e.cells);r.color!==e.currTurn||!r.isLastInCell||Oe.hasEatenSoldiers(e.currTurn,s)&&!r.isEaten||(r.selected=!0,e.selectedSoldier=r)},setCells:function(e){for(var t=0;t<=27;t++)e.cells.push({id:t,soldiers:[],isHouseOf:!1,isPossibleMove:!1})},setSoldiers:function(e){var t={1:{amount:2,color:"white"},6:{amount:5,color:"black"},8:{amount:3,color:"black"},12:{amount:5,color:"white"},13:{amount:5,color:"black"},17:{amount:3,color:"white"},19:{amount:5,color:"white"},24:{amount:2,color:"black"}};for(var n in t){var r;(r=e.cells[n].soldiers).push.apply(r,Object(_e["a"])(Oe.createSoldiers(t[n].amount,t[n].color)))}Oe.updateCells(e.cells)},showPossibleMoves:function(e,t){var n=t.possibleMoves,r=t.soldier;e.selectedSoldier||r.color!==e.currTurn||e.cells.filter(function(e){return n.includes(e.id)}).forEach(function(e){return e.isPossibleMove=!0})},showNoPossibleMoves:function(e){e.cells.forEach(function(e){return e.isPossibleMove=!1})},selectedSoldierNotEaten:function(e){e.selectedSoldier.isEaten=!1},updateDices:function(e,t){var n=t.srcCell,r=t.targetCell;e.dices=Oe.updateDices(e.dices,n,r)},calcPossibleMoves:function(e){var t=Oe.getAllSoldiers(e.cells);e.possibleMoves=Oe.calcPossibleMoves(e.dices,e.currTurn,e.cells,t)},checkWinner:function(e){e.winner=!!Oe.isEndGame(e.cells,e.currTurn)&&e.currTurn},startTurn:function(e){e.duringTurn=!0},endTurn:function(e){e.duringTurn=!1,e.dices=Oe.nullDices(e.dices),e.currTurn=Oe.passTurn(e.currTurn)},endGame:function(e,t){var n=t.winner;e.winner=n},clearBoard:function(e){e.cells=Oe.clearCells(e.cells)},setNewSoldiers:function(e,t){var n=t.cells;e.cells=n},updateCells:function(e){Oe.updateCells(e.cells)},rollDices:function(e){e.dices.rolling=!0},unrollDices:function(e){e.dices.rolling=!1},throwDices:function(e){e.dices=Oe.throwDices(e.dices)},dicesRes:function(e,t){var n=t.dices;e.dices.num1ToShow=n.num1ToShow,e.dices.num2ToShow=n.num2ToShow},setCurrTurn:function(e,t){var n=t.startingColor;e.currTurn=n}},actions:{throwDices:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,n("startTurn"),n("throwDices"),n("calcPossibleMoves"),e.next=6,setTimeout(function(){n("unrollDices")},1e3);case 6:if(r.possibleMoves.length){e.next=9;break}return e.next=9,setTimeout(function(){n("endTurn")},2e3);case 9:return e.abrupt("return",r.dices);case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getLoggedInUser:function(e){var t=e.commit;ct.getLoggedInUser().then(function(e){t({type:"setLoggedInUser",user:e})})},login:function(e,t){var n=e.commit,r=t.loginData;return ct.login(r).then(function(e){return e&&n({type:"setLoggedInUser",user:e}),e})},logout:function(e){var t=e.commit;return ct.logout(),t("logOutUser"),Promise.resolve()},setBoard:function(e,t){var n=e.commit,r=t.cells;r?(n("clearBoard"),n({type:"setNewSoldiers",cells:r}),n("updateCells"),n("calcPossibleMoves")):(n("setCells"),n({type:"setSoldiers"}))},moveSoldier:function(e,t){var n=e.state,r=e.commit,s=t.targetCell,o=Oe.isPossibleMove(s.id,n.selectedSoldier);if(!o)return!1;var i=Oe.getCellBySoldierId(n.cells,n.selectedSoldier.id),l=Oe.isMiddleCell(i);l&&r("selectedSoldierNotEaten");var c=Oe.checkIsEating(s,n.currTurn);if(c){var u=s.soldiers.pop();u.isEaten=!0;var a=Oe.getMiddleCell(u.color,n.cells);a.soldiers.push(u),Oe.updateCell(a)}return i.soldiers.pop(),s.soldiers.push(n.selectedSoldier),n.selectedSoldier.justMoved=!0,r({type:"updateDices",srcCell:i,targetCell:s}),r("calcPossibleMoves"),r("checkWinner"),n.winner?void 0:(n.possibleMoves.length||r("endTurn"),!0)}},getters:{cells:function(e){return e.cells},dices:function(e){return e.dices},winner:function(e){return e.winner},currTurn:function(e){return e.currTurn},duringTurn:function(e){return e.duringTurn},loggedInUser:function(e){return e.loggedInUser},dicesRolling:function(e){return e.dices.rolling},isLoggedInUser:function(e){return!!e.loggedInUser},selectedSoldier:function(e){return e.selectedSoldier},loggedInUserColor:function(e){return e.loggedInUser.color}}},pt={throwStartDice:gt};function gt(e){return e=ke.getRandomInt(1,7),e}var vt={state:{isGameOn:!1,startDice:{dice:6,white:null,black:null}},mutations:{gameOn:function(e){e.isGameOn=!0},setStartDice:function(e,t){var n=t.color;e.startDice.dice=e.startDice[n]=pt.throwStartDice(e.startDice.dice)},setStartDiceTo:function(e,t){var n=t.dice,r=t.color;e.startDice.dice=e.startDice[r]=n},nullDice:function(e){e.startDice.white=e.startDice.black=null}},actions:{diceRes:function(e,t){var n=e.commit,r=t.dice,s=t.userColor,o="white"===s?"black":"white";n(r?{type:"setStartDiceTo",color:o,dice:r}:{type:"setStartDice",color:o})}},getters:{isGameOn:function(e){return e.isGameOn},startDice:function(e){return e.startDice}}};r["default"].use(Ce["a"]);var wt=new Ce["a"].Store({modules:{gameModule:mt,startModule:vt},state:{},mutations:{},actions:{},getters:{}}),bt=n("5c96"),Ct=n.n(bt),_t=(n("0fae"),n("e2e4"),n("5132")),kt=n.n(_t),yt=(n("c1c3"),"http://localhost:3000");yt="/",r["default"].use(Ce["a"]),r["default"].use(Ct.a),r["default"].use(new kt.a({debug:!0,connection:yt,vuex:{store:wt,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),r["default"].config.productionTip=!1,r["default"].crossOrigin="true",new r["default"]({router:be,store:wt,render:function(e){return e(Z)}}).$mount("#app")},"7a55":function(e,t,n){"use strict";var r=n("ab33"),s=n.n(r);s.a},"7dd9":function(e,t,n){"use strict";var r=n("ccc9"),s=n.n(r);s.a},"880f":function(e,t,n){"use strict";var r=n("0939"),s=n.n(r);s.a},"8ff2":function(e,t,n){"use strict";var r=n("49c7"),s=n.n(r);s.a},a7e0:function(e,t,n){"use strict";var r=n("d78f"),s=n.n(r);s.a},ab33:function(e,t,n){},adaf:function(e,t,n){},b8af:function(e,t,n){},c1c3:function(e,t,n){},c597:function(e,t,n){"use strict";var r=n("09ab"),s=n.n(r);s.a},cae5:function(e,t,n){"use strict";var r=n("eda4"),s=n.n(r);s.a},ccc9:function(e,t,n){},d78f:function(e,t,n){},e887:function(e,t,n){"use strict";var r=n("adaf"),s=n.n(r);s.a},eda4:function(e,t,n){},efd8:function(e,t,n){"use strict";var r=n("b8af"),s=n.n(r);s.a}});
//# sourceMappingURL=app.1a2332aa.js.map