(function(e){function t(t){for(var o,i,l=t[0],c=t[1],u=t[2],d=0,f=[];d<l.length;d++)i=l[d],r[i]&&f.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);a&&a(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},s=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var a=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09ab":function(e,t,n){},1:function(e,t){},"1fde":function(e,t,n){var o={"./uws_darwin_57.node":"d13f","./uws_darwin_59.node":"b384","./uws_darwin_64.node":"91f6","./uws_linux_57.node":"c3ef","./uws_linux_59.node":"bc7c","./uws_linux_64.node":"3980","./uws_win32_57.node":"02bf","./uws_win32_59.node":"7dfe","./uws_win32_64.node":"0870"};function r(e){var t=s(e);return n(t)}function s(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(o)},r.resolve=s,e.exports=r,r.id="1fde"},2:function(e,t){},3:function(e,t){},4:function(e,t){},"49c7":function(e,t,n){},"4a68":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="4a68"},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav-bar"),n("router-view")],1)},s=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-board"},[n("header",{staticClass:"flex justify-center align-center p-10"},[n("h2",{staticClass:"mx-20",style:{color:e.currTurn}},[e._v("Current Turn")]),n("soldier",{attrs:{color:e.currTurn}})],1),n("div",{staticClass:"flex flex-row"},[e.cells?n("game-board",{attrs:{cells:e.cells}}):e._e(),n("dices-section")],1),n("footer")])},l=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"game-board",class:{"flipped-board":"black"===e.userColor},on:{click:e.unselect}},[n("div",{staticClass:"flex flex-column"},[n("div",{staticClass:"board-row top-row flex space-between"},[n("game-cell",{attrs:{exit:!0,cell:e.cells[0]}}),n("div",{staticClass:"board-cells flex space-between"},[e._l(6,function(t){return e.cells?n("game-cell",{key:t,attrs:{cell:e.cells[t]}}):e._e()}),n("game-cell",{attrs:{middle:!0,cell:e.cells[26]}}),e._l(6,function(t){return e.cells?n("game-cell",{key:t+6,attrs:{cell:e.cells[t+6]}}):e._e()})],2)],1),e.winner?n("span",{staticClass:"win capitalize"},[e._v(e._s(e.winner)+" has won!")]):e._e(),n("div",{staticClass:"board-row bot-row flex space-between"},[n("div",{staticClass:"board-cells flex space-between"},[e._l(6,function(t){return e.cells?n("game-cell",{key:t+12,attrs:{cell:e.cells[t+12]}}):e._e()}),n("game-cell",{attrs:{middle:!0,cell:e.cells[27]}}),e._l(6,function(t){return e.cells?n("game-cell",{key:t+18,attrs:{cell:e.cells[t+18]}}):e._e()})],2),n("game-cell",{attrs:{exit:!0,cell:e.cells[25]}})],1)])])},u=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-cell flex flex-column align-center wrap",class:{middle:e.middle,exit:e.exit}},[e.middle?e._e():n("div",{class:{"triangle-up":e.cell.id>12&&e.cell.id<25,"triangle-down":e.cell.id<13&&e.cell.id>0,"triangle-red":e.cell.id%2===0,"triangle-black":e.cell.id%2!==0,"exit-cell":0===e.cell.id||25===e.cell.id,"triangle-green":e.cell.isPossibleMove},on:{click:function(t){return t.stopPropagation(),e.onCellClick(t)}}}),e._l(e.cell.soldiers,function(t,o){return e.cell.soldiers?n("soldier",{key:t.id,attrs:{soldier:t,idx:o},nativeOn:{dblclick:function(t){e.onSoldierDblClick()},mouseout:function(t){e.onSoldierOut()},mouseover:function(n){e.onSoldierHover(t)},click:function(n){n.stopPropagation(),e.onSoldierClick(t)}}}):e._e()})],2)},d=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"soldier-section"},[e.soldier?n("div",{staticClass:"soldier",class:{white:"white"===e.soldier.color,black:"black"===e.soldier.color,selected:e.soldier.selected}}):e._e(),e.color?n("div",{staticClass:"soldier-const",class:{white:"white"===e.color,black:"black"===e.color}}):e._e()])},p=[],g={props:{soldier:Object,color:String}},m=g,h=(n("b86b"),n("2877")),v=Object(h["a"])(m,f,p,!1,null,"6d588ce0",null);v.options.__file="soldier.vue";var b=v.exports,w=(n("8055"),{props:{cell:Object,middle:Boolean,exit:Boolean},components:{soldier:b},methods:{onCellClick:function(){this.selectedSoldier&&(this.$store.commit("showNoPossibleMoves"),this.$store.dispatch({type:"moveSoldier",targetCell:this.cell})),this.$store.commit("unselectSoldiers");var e=this.$store.getters.cells,t=1;this.$socket.emit("soldierMoved",e,t)},onSoldierClick:function(e){this.$store.commit("unselectSoldiers"),this.$store.commit("showNoPossibleMoves"),this.$store.commit({type:"showPossibleMoves",possibleMoves:e.possibleMoves,soldier:e}),this.$store.commit({type:"selectSoldier",soldierId:e.id})},onSoldierDblClick:function(){},onSoldierHover:function(e){e.possibleMoves.length&&this.$store.commit({type:"showPossibleMoves",possibleMoves:e.possibleMoves,soldier:e})},onSoldierOut:function(){this.selectedSoldier||this.$store.commit("showNoPossibleMoves")}},computed:{selectedSoldier:function(){return this.$store.getters.selectedSoldier}}}),_=w,C=(n("ee9d"),Object(h["a"])(_,a,d,!1,null,"0a38137c",null));C.options.__file="game-cell.vue";var y=C.exports,x={props:{cells:Array},components:{gameCell:y},methods:{unselect:function(){this.$store.commit("showNoPossibleMoves"),this.$store.commit("unselectSoldiers")}},computed:{winner:function(){return this.$store.getters.winner},userColor:function(){return this.$store.getters.loggedInUserColor}}},S=x,k=(n("efd8"),Object(h["a"])(S,c,u,!1,null,"1fc7afc9",null));k.options.__file="game-board.vue";var I=k.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dices-section flex flex-column align-center"},[e.showButton?n("button",{staticClass:"bold capitalize",on:{click:function(t){return t.stopPropagation(),e.throwDices(t)}}},[e._v("click to throw dices")]):e._e(),e.duringTurn&&!e.dices.doubleCount&&e.dices.num1&&e.dices.num2?n("span",{staticClass:"dice-text"},[e._v(e._s(e.dices.num1)+" + "+e._s(e.dices.num2)+" = "+e._s(e.dices.num1+e.dices.num2))]):e._e(),!e.duringTurn||e.dices.doubleCount||e.dices.num1?e._e():n("span",{staticClass:"dice-text"},[e._v(e._s(e.dices.num2))]),!e.duringTurn||e.dices.doubleCount||e.dices.num2?e._e():n("span",{staticClass:"dice-text"},[e._v(e._s(e.dices.num1))]),e.duringTurn&&e.dices.doubleCount?n("span",{staticClass:"dice-text"},[e._v(e._s(e.dices.num1)+" * "+e._s(e.dices.doubleCount)+" = "+e._s(e.dices.num1*e.dices.doubleCount))]):e._e(),n("dice",{attrs:{rolling:e.rolling,num:e.dices.num1ToShow}}),n("dice",{attrs:{rolling:e.rolling,num:e.dices.num2ToShow}}),n("div",{staticClass:"soldier-section capitalize text-center"},[e._v("current turn:")]),n("soldier",{attrs:{color:e.currTurn}})],1)},U=[],T=(n("96cf"),n("1da1")),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dice flex flex-row justify-evenly",class:{rolling:e.rolling}},[n("div",{staticClass:"flex flex-column justify-evenly"},e._l(3,function(t){return n("div",{key:t,staticClass:"dot",class:{show:e.displayDots.includes(2*t-1)}})})),n("div",{staticClass:"flex flex-column justify-evenly"},[n("div",{staticClass:"dot",class:{show:e.displayDots.includes(7)}})]),n("div",{staticClass:"flex flex-column justify-evenly"},e._l(3,function(t){return n("div",{key:t,staticClass:"dot",class:{show:e.displayDots.includes(0+2*t)}})}))])},M=[],O=(n("c5f6"),{props:{num:Number,rolling:Boolean},computed:{displayDots:function(){switch(this.num){case 1:return[7];case 2:return[1,6];case 3:return[1,6,7];case 4:return[1,5,2,6];case 5:return[1,5,2,6,7];case 6:return[1,2,3,4,5,6]}}}}),D=O,P=(n("e887"),Object(h["a"])(D,E,M,!1,null,"76f53de6",null));P.options.__file="dice.vue";var L=P.exports,j={components:{dice:L,soldier:b},data:function(){return{}},methods:{throwDices:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("rollDices"),t=1,this.$socket.emit("rollDices",t),e.next=5,setTimeout(function(){n.$store.dispatch("throwDices"),n.$socket.emit("dicesRes",t,n.dices)},1e3);case 5:console.log(this.dices);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},sockets:{dicesRolling:function(){this.$store.commit("rollDices")},dicesUnrolling:function(e){this.$store.commit("unrollDices"),this.$store.commit({type:"dicesRes",dices:e})},turnEnded:function(){this.$store.commit("endTurn")}},computed:{dices:function(){return this.$store.getters.dices},duringTurn:function(){return this.$store.getters.duringTurn},currTurn:function(){return this.$store.getters.currTurn},userColor:function(){return this.$store.getters.loggedInUserColor},showButton:function(){return!this.duringTurn&&!this.rolling&&this.currTurn===this.userColor},rolling:function(){return this.$store.getters.dicesRolling}},watch:{duringTurn:function(e,t){if(!1===e){var n=1;this.$socket.emit("endTurn",n)}}}},N=j,B=(n("b44a"),Object(h["a"])(N,$,U,!1,null,"5743f710",null));B.options.__file="dices-section.vue";var R=B.exports,A={name:"appBoard",components:{gameBoard:I,dicesSection:R,soldier:b},methods:{},computed:{cells:function(){return this.$store.getters.cells},currTurn:function(){return this.$store.getters.currTurn},winner:function(){return this.$store.getters.winner}},created:function(){this.$store.dispatch({type:"setBoard"});var e=1;this.$socket.emit("gameJoined",e)},sockets:{userJoined:function(){var e=1;this.$socket.emit("alreadyHere",e)},someoneAlreadyHere:function(){this.$store.commit("changeMyColor")},movedSoldier:function(e){this.$store.dispatch({type:"setBoard",cells:e})},gameEnded:function(e){this.$store.commit({type:"endGame",winner:e})}},watch:{winner:function(e,t){if(e){var n=1,o=e;this.$socket.emit("endGame",n,o)}}}},H=A,W=(n("7a55"),Object(h["a"])(H,i,l,!1,null,"40d03fde",null));W.options.__file="app-board.vue";var G=W.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLoggedInUser?e._e():n("div",{staticClass:"nav-bar flex space-between"},[n("router-link",{staticClass:"logo",attrs:{to:"/"}},[e._v("backGammon")]),n("div",{staticClass:"links"},[e.isLoggedInUser?n("el-button",{attrs:{round:"",to:"/event/edit"},on:{click:e.goEdit}},[e._v("\n        Create "),n("i",{staticClass:"fas fa-plus"})]):e._e(),e.loggedInUser?n("img",{staticClass:"circle-icon-sm",attrs:{src:e.loggedInUser.pic},on:{click:e.goProfile}}):e._e(),e.isLoggedInUser?n("a",{attrs:{href:"#"}},[e._v("\n        "+e._s(e.userColor)+"\n      ")]):e._e(),e.isLoggedInUser?n("a",{on:{click:e.logout}},[e._v("Logout")]):n("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1),n("a",{staticClass:"icon",class:{open:e.isOpen,guest:!e.isLoggedInUser},on:{click:e.setIsOpen}},[n("i",{staticClass:"fa fa-bars"})]),n("aside",{staticClass:"flex flex-column",class:{open:e.isOpen,guest:!e.isLoggedInUser}},[e.isLoggedInUser?n("a",{on:{click:e.logout}},[e._v("Logout")]):e._e(),e.isLoggedInUser?n("div",{staticClass:"flex align-center profile-wrapper"},[n("img",{staticClass:"circle-icon-sm",attrs:{src:e.loggedInUser.pic},on:{click:e.goProfile}}),n("a",{on:{click:e.goProfile}},[e._v("\n          Profile\n        ")])]):n("a",{on:{click:e.goLogin}},[e._v("Login")]),e.isLoggedInUser?n("el-button",{attrs:{round:"",to:"/event/edit"},on:{click:e.goEdit}},[e._v("\n        Create "),n("i",{staticClass:"fas fa-plus"})]):e._e()],1)],1)},q=[],z={data:function(){return{isOpen:!1}},methods:{goProfile:function(){this.isOpen=!1,this.$router.push("/user/".concat(this.loggedInUser._id))},setIsOpen:function(){return this.isOpen=!this.isOpen},logout:function(){var e=this;this.isOpen=!1,this.$store.dispatch({type:"logout"}).then(function(){e.$router.push("/")})},goEdit:function(){this.isOpen=!1,this.$router.push("/event/edit")},goLogin:function(){this.isOpen=!1,this.$router.push("/login")}},computed:{isLoggedInUser:function(){return this.$store.getters.isLoggedInUser},loggedInUser:function(){return this.$store.getters.loggedInUser},userColor:function(){return this.$store.getters.loggedInUserColor}}},F=z,K=(n("c597"),Object(h["a"])(F,J,q,!1,null,null,null));K.options.__file="nav-bar.vue";var V=K.exports,Q={components:{navBar:V},created:function(){this.$store.dispatch("getLoggedInUser")}},X=Q,Y=Object(h["a"])(X,r,s,!1,null,null,null);Y.options.__file="App.vue";var Z=Y.exports,ee=n("8c4f"),te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"signup-card-wrapper"},[n("form",{staticClass:"signup-form-container flex flex-column align-center",on:{submit:function(t){return t.preventDefault(),e.submitNewUser(t)}}},[n("h1",[e._v("sign up")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{required:"",type:"text",placeholder:"Full Name..."},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{required:"",type:"password",placeholder:"Password..."},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}}),n("div",{staticClass:"signup-button-wrapper"},[n("button",{staticClass:"brand-button",attrs:{type:"submit"}},[e._v("Save")]),n("router-link",{attrs:{to:"/"}},[n("button",{staticClass:"brand-button"},[e._v("Back")])])],1)])])},ne=[],oe={data:function(){return{newUser:{name:"",password:""}}},methods:{submitNewUser:function(){var e=this;this.$store.dispatch({type:"signUpUser",newUser:this.newUser}).then(function(){e.fromEventId?e.$router.push("/event/".concat(e.fromEventId)):e.$router.push("/")})}},created:function(){document.body.scrollIntoView({block:"start"}),this.fromEventId=this.$route.params.eventId}},re=oe,se=(n("7dd9"),Object(h["a"])(re,te,ne,!1,null,"26695c42",null));se.options.__file="sign-up.vue";var ie=se.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"login-page flex justify-center"},[n("form",{staticClass:"flex flex-column align-center",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("h2",[e._v("Login to play")]),n("el-input",{attrs:{required:"",placeholder:"username"},model:{value:e.loginData.userName,callback:function(t){e.$set(e.loginData,"userName",t)},expression:"loginData.userName"}}),n("el-input",{attrs:{required:"",type:"password",placeholder:"password"},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password",t)},expression:"loginData.password"}}),e.isWrong?n("span",[e._v("Wrong password / username")]):e._e(),n("div",{staticClass:"flex"},[n("el-button",{staticClass:"brand-button",attrs:{round:"","native-type":"submit"}},[n("i",{staticClass:"fas fa-sign-in-alt"}),e._v(" Login")]),n("el-button",{staticClass:"brand-button",attrs:{round:""},on:{click:e.signup}},[n("i",{staticClass:"fas fa-user-plus"}),e._v(" Sign Up")])],1),n("a",[e._v("forgot your password?")])],1)])},ce=[],ue={data:function(){return{loginData:{userName:"",password:""},isWrong:!1,fromEventId:""}},methods:{onSubmit:function(){var e=this;this.$store.dispatch({type:"login",loginData:this.loginData}).then(function(t){t?(e.isWrong=!1,e.fromEventId?e.$router.push("/event/".concat(e.fromEventId)):e.$router.push("/")):e.isWrong=!0})},signup:function(){this.fromEventId?this.$router.push("/signup/".concat(this.fromEventId)):this.$router.push("/signup")}},created:function(){document.body.scrollIntoView({block:"start"}),this.fromEventId=this.$route.params.eventId}},ae=ue,de=(n("8ff2"),Object(h["a"])(ae,le,ce,!1,null,null,null));de.options.__file="login-page.vue";var fe=de.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-board")},ge=[],me={components:{appBoard:G}},he=me,ve=(n("cae5"),Object(h["a"])(he,pe,ge,!1,null,null,null));ve.options.__file="home-page.vue";var be=ve.exports;o["default"].use(ee["a"]);var we=new ee["a"]({mode:"history",base:"/",routes:[{path:"/",name:"homepage",component:be},{path:"/signup",name:"signup",component:ie},{path:"/login",name:"login",component:fe}]}),_e=n("2f62"),Ce=(n("6762"),n("2fdb"),n("2909")),ye=(n("ac6a"),n("7f7f"),n("20d6"),n("7514"),{getRandomInt:xe,makeId:Se,makeLorem:Ie,getCurrency:ke});function xe(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function Se(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function ke(e){switch(e){case"ILS":return"₪";case"EUR":return"€";case"USD":return"$";default:return""}}function Ie(e){var t="";while(t.length<e){var n=xe(3,6),o=$e(n);Math.random()>.9&&(o+=","),t+=o+" "}return t=t.substring(0,e),t=t[0].toUpperCase()+t.substr(1),t}function $e(e){var t="";while(t.length<e){var n=Ue();t+=n}return t}function Ue(){var e="abcdefghijklmnopqrstuvwxyz",t=parseInt(Math.random()*e.length);return e.charAt(t)}var Te={createSoldiers:Me,getAllSoldiers:De,getSoldierById:Pe,getCellBySoldierId:je,updateCells:Be,updateCell:Re,isPossibleMove:Ae,passTurn:He,checkIsEating:We,hasEatenSoldiers:Ge,isMiddleCell:Je,calcPossibleMoves:Ke,throwDices:qe,updateDices:ze,getMiddleCell:Ne,isEndGame:rt,nullDices:Fe,clearCells:st},Ee=0;function Me(e,t){for(var n=[],o=0;o<e;o++)n.push(Oe(t));return n}function Oe(e){var t={color:e,id:Ee++,possibleMoves:[],isEaten:!1,isOut:!1,selected:!1,isLastInCell:!1};return t}function De(e){var t=[];return e.map(function(e){return e.soldiers}).forEach(function(e){e.forEach(function(e){t.push(e)})}),t}function Pe(e,t){var n;return e.find(function(e){if(n=e.soldiers.find(function(e){return e.id===t}),n)return n}),n}function Le(e,t){return e.find(function(e){return e.id===t})}function je(e,t){return e.find(function(e){return e.soldiers.find(function(e){return e.id===t})})}function Ne(e,t){var n="white"===e?26:27;return Le(t,n)}function Be(e){e.forEach(function(e){Re(e)})}function Re(e){var t=0,n=0;e.soldiers.forEach(function(o,r){o.possibleMoves=[],o.isLastInCell=r===e.soldiers.length-1,"white"===o.color?t++:"black"===o.color&&n++}),e.isHouseOf=t>1?"white":n>1&&"black",26!==e.id&&27!==e.id||e.soldiers.forEach(function(e){e.isEaten=!0})}function Ae(e,t){return void 0!==t.possibleMoves.find(function(t){return t===e})}function He(e){return"white"===e?"black":"white"}function We(e,t){return!(!e.soldiers.length||e.soldiers[0].color===t)}function Ge(e,t){return t=t.filter(function(t){return t.color===e}),!!t.find(function(e){return e.isEaten})}function Je(e){return 26===e.id||27===e.id}function qe(e){if(e.num1=ye.getRandomInt(1,7),e.num2=ye.getRandomInt(1,7),e.num1>e.num2){var t=e.num1;e.num1=e.num2,e.num2=t}e.num1ToShow=e.num1,e.num2ToShow=e.num2,e.num1===e.num2?(e.doubleCount=4,e.num2=null):e.doubleCount=0}function ze(e,t,n){var o=t.id;26===o?o=0:27===o&&(o=25);var r=Math.abs(o-n.id);if(e.doubleCount){var s=Math.floor(r/e.num1);r%e.num1!==0&&s++,e.doubleCount-=s,e.doubleCount||(e.num1=null)}else r<=e.num1?e.num1=null:r<=e.num2?e.num2=null:(e.num1=null,e.num2=null);return e}function Fe(e){return e.num1=null,e.num2=null,e.doubleCount=null,e}function Ke(e,t,n,o){o=Ve(n,o,t);var r="white"===t?1:-1,s=[];return o.forEach(function(o){var i=je(n,o.id),l=Qe(e,i,r);l=Xe(i,l),l=Ye(n,l,t),l=Ze(e,l),l=et(l),ot(n,t)||(l=tt(l,t)),o.possibleMoves=l,s.push({soldierId:o.id,moves:l})}),nt(s)||(s=[]),s}function Ve(e,t,n){return Ge(n,t)?"white"===n?[Le(e,26).soldiers[Le(e,26).soldiers.length-1]]:[Le(e,27).soldiers[Le(e,27).soldiers.length-1]]:t.filter(function(e){return e.color===n&&e.isLastInCell})}function Qe(e,t,n){var o=[],r=t.id,s=!0;if(26===r?r=0:27===r?r=25:s=!1,e.doubleCount)for(var i=1;i<=e.doubleCount;i++)o.push(r+n*e.num1*i);else o=e.num1||e.num2?s?[r+n*e.num1,r+n*e.num2,null]:[r+n*e.num1,r+n*e.num2,r+n*(e.num1+e.num2)]:[];return o}function Xe(e,t){var n=e.id;return 27===e.id?n=25:26===e.id&&(n=0),t.map(function(e){return e===n?null:e})}function Ye(e,t,n){return e=t.map(function(t){return Le(e,t)}),e.forEach(function(e,o){(e&&"white"===n&&"black"===e.isHouseOf||e&&"black"===n&&"white"===e.isHouseOf)&&(t[o]=null)}),t}function Ze(e,t){if(e.doubleCount){var n=t.findIndex(function(e){return null===e});return-1!==n&&(t=t.map(function(e,t){return t>n?null:e})),t}return null===t[0]&&null===t[1]&&(t[2]=null),t}function et(e){e=e.map(function(e){return e>25?25:e<0?0:e});var t=e.findIndex(function(e){return 25===e||0===e});return-1!==t&&(e=e.map(function(e,n){return n>t?null:e})),e}function tt(e,t){return"white"===t?e.map(function(e){return e>=25||0===e?null:e}):e.map(function(e){return 0===e||e>=25?null:e})}function nt(e){return e.find(function(e){return!!e.moves.length&&void 0!==e.moves.find(function(e){return null!==e})})}function ot(e,t){e="white"===t?e.slice(19,26):e.slice(0,7);var n=0;return e.forEach(function(e){e.soldiers.forEach(function(e){e.color===t&&n++})}),15===n}function rt(e,t){var n="white"===t?e[25].soldiers.length:e[0].soldiers.length;return 15===n}function st(e){return e.forEach(function(e){e.soldiers=[]}),e}var it=n("bc3a"),lt="",ct={login:ut,logout:at,getLoggedInUser:dt,getById:ft,signupUser:pt};function ut(e){var t=e.userName,n=e.password;return it.put("".concat(lt,"/login"),{userName:t,password:n}).then(function(e){return sessionStorage.loggedInUser=JSON.stringify(e.data),e.data})}function at(){return it.post("".concat(lt,"/logout")).then(function(){sessionStorage.removeItem("loggedInUser")})}function dt(){return sessionStorage.loggedInUser?Promise.resolve(JSON.parse(sessionStorage.loggedInUser)):Promise.resolve("")}function ft(e){if(e)return it.get("".concat(lt,"/player/").concat(e)),it.get("".concat(lt,"/player/").concat(e)).then(function(e){return e.data})}function pt(e){return it.post("".concat(lt,"/signup"),e)}var gt={state:{cells:[],soldiers:[],selectedSoldier:null,currTurn:"white",dices:{num1:6,num2:6,num1ToShow:6,num2ToShow:6,doubleCount:0,rolling:!1},possibleMoves:[],winner:!1,duringTurn:!1,loggedInUser:{}},mutations:{setLoggedInUser:function(e,t){var n=t.user;e.loggedInUser={name:n.name,_id:n._id,pic:n.pic,color:"white"}},logOutUser:function(e){e.loggedInUser=""},changeMyColor:function(e){e.loggedInUser.color="black"},unselectSoldiers:function(e){var t=Te.getAllSoldiers(e.cells);t.forEach(function(e){return e.selected=!1}),e.selectedSoldier=null},selectSoldier:function(e,t){var n=t.soldierId,o=Te.getSoldierById(e.cells,n),r=Te.getAllSoldiers(e.cells);o.color!==e.currTurn||!o.isLastInCell||Te.hasEatenSoldiers(e.currTurn,r)&&!o.isEaten||(o.selected=!0,e.selectedSoldier=o)},setCells:function(e){for(var t=0;t<=27;t++)e.cells.push({id:t,soldiers:[],isHouseOf:!1,isPossibleMove:!1})},setSoldiers:function(e){var t={1:{amount:2,color:"white"},6:{amount:5,color:"black"},8:{amount:3,color:"black"},12:{amount:5,color:"white"},13:{amount:5,color:"black"},17:{amount:3,color:"white"},19:{amount:5,color:"white"},24:{amount:2,color:"black"}};for(var n in t){var o;(o=e.cells[n].soldiers).push.apply(o,Object(Ce["a"])(Te.createSoldiers(t[n].amount,t[n].color)))}Te.updateCells(e.cells)},showPossibleMoves:function(e,t){var n=t.possibleMoves,o=t.soldier;e.selectedSoldier||o.color!==e.currTurn||e.cells.filter(function(e){return n.includes(e.id)}).forEach(function(e){return e.isPossibleMove=!0})},showNoPossibleMoves:function(e){e.cells.forEach(function(e){return e.isPossibleMove=!1})},selectedSoldierNotEaten:function(e){e.selectedSoldier.isEaten=!1},updateDices:function(e,t){var n=t.srcCell,o=t.targetCell;e.dices=Te.updateDices(e.dices,n,o)},calcPossibleMoves:function(e){var t=Te.getAllSoldiers(e.cells);e.possibleMoves=Te.calcPossibleMoves(e.dices,e.currTurn,e.cells,t)},checkWinner:function(e){e.winner=!!Te.isEndGame(e.cells,e.currTurn)&&e.currTurn},startTurn:function(e){e.duringTurn=!0},endTurn:function(e){e.duringTurn=!1,e.dices=Te.nullDices(e.dices),e.currTurn=Te.passTurn(e.currTurn)},endGame:function(e,t){var n=t.winner;e.winner=n},clearBoard:function(e){e.cells=Te.clearCells(e.cells)},setNewSoldiers:function(e,t){var n=t.cells;e.cells=n},updateCells:function(e){Te.updateCells(e.cells)},rollDices:function(e){e.dices.rolling=!0},unrollDices:function(e){e.dices.rolling=!1},throwDices:function(e){Te.throwDices(e.dices)},dicesRes:function(e,t){var n=t.dices;e.dices.num1ToShow=n.num1ToShow,e.dices.num2ToShow=n.num2ToShow}},actions:{throwDices:function(){var e=Object(T["a"])(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,o=t.state,n("startTurn"),n("throwDices"),n("calcPossibleMoves"),e.next=6,setTimeout(function(){n("unrollDices")},1e3);case 6:if(o.possibleMoves.length){e.next=9;break}return e.next=9,setTimeout(function(){n("endTurn")},2e3);case 9:return e.abrupt("return",o.dices);case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getLoggedInUser:function(e){var t=e.commit;ct.getLoggedInUser().then(function(e){t({type:"setLoggedInUser",user:e})})},login:function(e,t){var n=e.commit,o=t.loginData;return ct.login(o).then(function(e){return e&&n({type:"setLoggedInUser",user:e}),e})},logout:function(e){var t=e.commit;return ct.logout(),t("logOutUser"),Promise.resolve()},setBoard:function(e,t){var n=e.commit,o=t.cells;o?(n("clearBoard"),n({type:"setNewSoldiers",cells:o}),n("updateCells"),n("calcPossibleMoves")):(n("setCells"),n({type:"setSoldiers"}))},moveSoldier:function(e,t){var n=e.state,o=e.commit,r=t.targetCell,s=Te.isPossibleMove(r.id,n.selectedSoldier);if(s){var i=Te.getCellBySoldierId(n.cells,n.selectedSoldier.id),l=Te.isMiddleCell(i);l&&o("selectedSoldierNotEaten");var c=Te.checkIsEating(r,n.currTurn);if(c){var u=r.soldiers.pop();u.isEaten=!0;var a=Te.getMiddleCell(u.color,n.cells);a.soldiers.push(u),Te.updateCell(a)}i.soldiers.pop(),r.soldiers.push(n.selectedSoldier),o({type:"updateDices",srcCell:i,targetCell:r}),o("calcPossibleMoves"),o("checkWinner"),n.winner||n.possibleMoves.length||o("endTurn")}}},getters:{cells:function(e){return e.cells},dices:function(e){return e.dices},winner:function(e){return e.winner},currTurn:function(e){return e.currTurn},duringTurn:function(e){return e.duringTurn},loggedInUser:function(e){return e.loggedInUser},dicesRolling:function(e){return e.dices.rolling},isLoggedInUser:function(e){return!!e.loggedInUser},selectedSoldier:function(e){return e.selectedSoldier},loggedInUserColor:function(e){return e.loggedInUser.color}}};o["default"].use(_e["a"]);var mt=new _e["a"].Store({modules:{gameModule:gt},state:{},mutations:{},actions:{},getters:{}}),ht=n("5c96"),vt=n.n(ht),bt=(n("0fae"),n("e2e4"),n("5132")),wt=n.n(bt),_t=(n("c1c3"),"http://localhost:3000");_t="/",o["default"].use(_e["a"]),o["default"].use(vt.a),o["default"].use(new wt.a({debug:!0,connection:_t,vuex:{store:mt,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),o["default"].config.productionTip=!1,o["default"].crossOrigin="true",new o["default"]({router:we,store:mt,render:function(e){return e(Z)}}).$mount("#app")},"6c0b":function(e,t,n){},"7a55":function(e,t,n){"use strict";var o=n("ab33"),r=n.n(o);r.a},"7dd9":function(e,t,n){"use strict";var o=n("ccc9"),r=n.n(o);r.a},"8ff2":function(e,t,n){"use strict";var o=n("49c7"),r=n.n(o);r.a},ab33:function(e,t,n){},adaf:function(e,t,n){},b44a:function(e,t,n){"use strict";var o=n("f725"),r=n.n(o);r.a},b86b:function(e,t,n){"use strict";var o=n("cab4"),r=n.n(o);r.a},b8af:function(e,t,n){},c1c3:function(e,t,n){},c597:function(e,t,n){"use strict";var o=n("09ab"),r=n.n(o);r.a},cab4:function(e,t,n){},cae5:function(e,t,n){"use strict";var o=n("eda4"),r=n.n(o);r.a},ccc9:function(e,t,n){},e887:function(e,t,n){"use strict";var o=n("adaf"),r=n.n(o);r.a},eda4:function(e,t,n){},ee9d:function(e,t,n){"use strict";var o=n("6c0b"),r=n.n(o);r.a},efd8:function(e,t,n){"use strict";var o=n("b8af"),r=n.n(o);r.a},f725:function(e,t,n){}});
//# sourceMappingURL=app.8eba1fa9.js.map